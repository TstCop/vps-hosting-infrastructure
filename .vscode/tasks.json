{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "üöÄ Setup Environment",
            "type": "shell",
            "command": "sudo ./setup.sh",
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new",
                "showReuseMessage": true,
                "clear": false
            },
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "detail": "Preparar ambiente Ubuntu 22.04/24.04 com Vagrant+KVM"
        },
        {
            "label": "üîß Install Git Hooks",
            "type": "shell",
            "command": "./scripts/hooks/install-hooks.sh",
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new"
            },
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "detail": "Instalar hooks git para valida√ß√£o autom√°tica"
        },
        {
            "label": "üèóÔ∏è Start GitLab VPS",
            "type": "shell",
            "command": "vagrant up",
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new"
            },
            "options": {
                "cwd": "${workspaceFolder}/core/gitlab-vps"
            },
            "problemMatcher": [],
            "detail": "Iniciar VPS do GitLab"
        },
        {
            "label": "üåê Start Nginx App VPS",
            "type": "shell",
            "command": "vagrant up",
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new"
            },
            "options": {
                "cwd": "${workspaceFolder}/core/nginx-app-vps"
            },
            "problemMatcher": [],
            "detail": "Iniciar VPS do Nginx App"
        },
        {
            "label": "üõë Stop All VPS",
            "type": "shell",
            "command": "bash",
            "args": [
                "-c",
                "cd core/gitlab-vps && vagrant halt; cd ../nginx-app-vps && vagrant halt"
            ],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new"
            },
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "detail": "Parar todos os VPS"
        },
        {
            "label": "üìä VPS Status",
            "type": "shell",
            "command": "bash",
            "args": [
                "-c",
                "echo '=== GitLab VPS ===' && cd core/gitlab-vps && vagrant status; echo '=== Nginx App VPS ===' && cd ../nginx-app-vps && vagrant status"
            ],
            "group": "test",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new"
            },
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "detail": "Verificar status de todos os VPS"
        },
        {
            "label": "üîç Validate Project",
            "type": "shell",
            "command": "./scripts/hooks/validate-vps-structure.sh",
            "group": "test",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new"
            },
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "detail": "Validar estrutura e configura√ß√µes do projeto"
        },
        {
            "label": "üßπ Clean VPS",
            "type": "shell",
            "command": "bash",
            "args": [
                "-c",
                "cd core/gitlab-vps && vagrant destroy -f; cd ../nginx-app-vps && vagrant destroy -f"
            ],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new"
            },
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "detail": "Destruir todos os VPS (cuidado!)"
        },
        {
            "label": "üîÑ Restart VPS",
            "type": "shell",
            "command": "bash",
            "args": [
                "-c",
                "cd core/gitlab-vps && vagrant reload; cd ../nginx-app-vps && vagrant reload"
            ],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new"
            },
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "detail": "Reiniciar todos os VPS"
        },
        {
            "label": "üìù Show Logs",
            "type": "shell",
            "command": "find /tmp -name 'vps-setup-*.log' -exec tail -50 {} \\;",
            "group": "test",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new"
            },
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "detail": "Mostrar √∫ltimas 50 linhas dos logs do setup"
        },
        {
            "label": "üåä App Dev Server",
            "type": "shell",
            "command": "npm run dev",
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new"
            },
            "options": {
                "cwd": "${workspaceFolder}/app"
            },
            "problemMatcher": ["$tsc"],
            "detail": "Iniciar servidor de desenvolvimento da aplica√ß√£o",
            "isBackground": true
        },
        {
            "label": "üî® Build App",
            "type": "shell",
            "command": "npm run build",
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new"
            },
            "options": {
                "cwd": "${workspaceFolder}/app"
            },
            "problemMatcher": ["$tsc"],
            "detail": "Compilar aplica√ß√£o TypeScript"
        }
    ]
}